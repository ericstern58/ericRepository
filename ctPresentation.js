window.Q=!0;var b={id:"drawTools",dcToolbar:document.getElementById("redo-button").parentNode.parentNode,dcBrushes:[{id:"brush-2",size:2},{id:"brush-5",size:5},{id:"brush-12",size:12},{id:"brush-35",size:35}],dcPalette:[],canvas:{},Canvas:drawApp.canvas,context:drawApp.c,mouseX:0,mouseY:0,shiftDown:0,eventHandlers:{}}; b.canvas={parentObject:b,Canvas:b.F,offset:{top:0,left:0},width:0,height:0,updateLocation:function(){this.offset=$("#drawingCanvas").offset();this.width=this.F.width();this.height=this.F.height()},isWithinBounds:function(c,a){return 0<=c&&0<=a&&c<this.width&&a<this.height},isWithinDrawingBounds:function(c,a){return-12<=c&&-12<=a&&c<this.width+12&&a<this.height+12},restore:function(){this.V.c.constructor.prototype.putImageData.call(this.V.c,restorePoints[restorePosition],0,0)}}; b.tools={currentToolType:0,toolActive:!1,points:[],toolType:{D:0,G:1,s:2,l:3,w:4,o:5,r:6,Z:99},reset:function(c){this.a.length=0;this.C=!1;c&&save()},paintMethods:{},squareShiftHold:function(c,a,d,e){d-=c;var l=e-a;e=Math.min(Math.abs(d),Math.abs(l));0<d?0<l?(c+=e,a+=e):(c+=e,a-=e):0<l?(c-=e,a+=e):(c-=e,a-=e);return{x:c,y:a}},lineShiftHold:function(c,a,d,e){var l=(a-e)/(c-d?c-d:1);return 2.4<l||-2.4>l?{x:c,y:e}:0.4>l&&-0.4<l?{x:d,y:a}:this.B(c,a,d,e)}}; b.options={id:"#"+b.id+"-options",useStrokeAsFill:!1,fillColor:"",lineToolsShouldClose:!1,curveTension:0.5,getOffset:function(){return $(this.id).offset()},toggleMenu:function(){var c=$(this.id).T("opacity");0==c?$(this.id).stop(!0,!0).R({height:"175px",marginTop:"-=175px",opacity:"1"},200,"swing"):1==c&&$(this.id).stop(!0,!0).R({height:"0px",marginTop:"+=175px",opacity:"0"},200,"swing")},isWithinBounds:function(c,a){var d=c-$(this.id).offset().top,e=a-$(this.id).offset().left,l=$(this.id).width(), g=$(this.id).height();return 0<=d&&0<=e&&d<l&&e<g}}; b.html={parentObject:b,init:{},buttonHandlers:{cleanToolsObject:b,brushClick:function(c){drawApp.ka(c);this.t.g.d=b.g.b.D;c=document.getElementsByName(b.id+"-btn-radio");for(var a=0;a<c.length;a++)c[a].checked=!1},setLineToolsOpen:function(){this.t.options.p=document.getElementById("drawTools-options-checkbox-lineToolsOpen").checked},setOptionsColor:function(c,a){a?(this.t.options.k=!0,this.t.options.fillColor=""):(this.t.options.k=!1,this.t.options.fillColor=c)},setToolType:function(c){this.t.g.d= c}}};b.g.e.drawLine=function(c,a,d,e,l){c.beginPath();c.moveTo(a,d);c.lineTo(e,l);c.stroke()};b.g.e.drawRect=function(c,a,d){c.save();c.lineJoin="round";c.beginPath();c.moveTo(a[0],a[1]);c.lineTo(a[2],a[1]);c.lineTo(a[2],a[3]);c.lineTo(a[0],a[3]);c.closePath();d&&(c.fillStyle=d,c.fill());c.stroke();c.restore()}; b.g.e.drawEllipse=function(c,a,d){var e=a[0],l=a[1],g=a[2]-a[0],h=a[3]-a[1];a=g/2*0.5522848;var k=h/2*0.5522848,m=e+g,s=l+h,g=e+g/2,h=l+h/2;c.save();c.lineJoin="round";c.beginPath();c.moveTo(e,h);c.bezierCurveTo(e,h-k,g-a,l,g,l);c.bezierCurveTo(g+a,l,m,h-k,m,h);c.bezierCurveTo(m,h+k,g+a,s,g,s);c.bezierCurveTo(g-a,s,e,h+k,e,h);c.closePath();d&&(c.fillStyle=d,c.fill());c.stroke();c.restore()}; b.g.e.floodFill=function(c,a,d){function e(a,c){var d=s(a,c);return b.canvas.v(a,c)&&!u(q,d)&&!u(w,d)}function l(a,c,d){var f=e(a,c),g=e(a-1,c);c=e(a+1,c);return f&&(g&&c||c&&e(a-1,d)||g&&e(a+1,d))?!0:!1}function g(a,c){return b.canvas.v(a,c)&&u(w,s(a,c))}function h(a,c,d,e){var f=e[0],g=e[1],h=e[2];e=e[3];c=4*(c+1+d*v);for(a=4*(a+d*v);a<c;a+=4)p[a]=f,p[a+1]=g,p[a+2]=h,p[a+3]=e}function k(a,c,d,e){m(a,c,[Math.ceil((d[0]+e[0])/2),Math.ceil((d[1]+e[1])/2),Math.ceil((d[2]+e[2])/2),Math.ceil((d[3]+e[3])/ 2)])}function m(a,c,d){a=4*(a+c*v);p[a]=d[0];p[a+1]=d[1];p[a+2]=d[2];p[a+3]=d[3]}function s(a,c){var d=4*(a+c*v);return[p[d],p[d+1],p[d+2],p[d+3]]}function u(a,c){return a[0]===c[0]&&a[1]===c[1]&&a[2]===c[2]&&a[3]===c[3]}a=Math.round(a);d=Math.round(d);b.canvas.restore();var v=b.canvas.width,x=c.getImageData(0,0,v,b.canvas.height),p=x.data,r=4*(a+d*b.canvas.width),w=[p[r],p[r+1],p[r+2],p[r+3]],r=parseInt(c.strokeStyle.substr(1,6),16),q=[r>>16&255,r>>8&255,r&255,255];if(!u(w,q)){r=[[a,d,1]];g(a,d- 1)&&r.push([a,d-1,-1]);a=[];for(var f=d=0,n=0;0<r.length;)if(n=r.pop(),d=n[0],f=n[1],n=n[2],g(d,f)){g(d,f+n)&&r.push([d,f+n,n]);l(d,f+n,f)&&a.push(d,f+n);l(d,f-n,f)&&a.push(d,f-n);for(var A=[0,0],z=0;2>z;z++){var y=z?1:-1,t;for(t=d+y;g(t,f);t+=y){var B=g(t,f+n),C=g(t,f-n),D=!g(t-y,f+n),E=!g(t-y,f-n);B&&D?r.push([t,f+n,n]):l(t,f+n,f)&&a.push(t,f+n);C&&E?r.push([t,f-n,-n]):l(t,f-n,f)&&a.push(t,f-n)}b.canvas.v(t,f)&&a.push(t,f);A[z]=t-y}h(A[0],A[1],f,q)}for(;0<a.length;)d=a.shift(),f=a.shift(),m(d,f, q),!u(q,s(d-1,f))&&b.canvas.v(d-1,f)&&k(d-1,f,q,s(d-1,f)),!u(q,s(d+1,f))&&b.canvas.v(d+1,f)&&k(d+1,f,q,s(d+1,f)),!u(q,s(d,f-1))&&b.canvas.v(d,f-1)&&k(d,f-1,q,s(d,f-1)),!u(q,s(d,f+1))&&b.canvas.v(d,f+1)&&k(d,f+1,q,s(d,f+1));c.putImageData(x,0,0)}}; b.g.e.drawLineChain=function(c,a,d,e,l){c.save();c.lineJoin="round";c.beginPath();c.moveTo(a[0],a[1]);for(var g=2;g<a.length;g+=2)c.lineTo(a[g],a[g+1]);e&&(d?(c.stroke(),e=parseInt(c.strokeStyle.substr(1,6),16),c.strokeStyle="rgba("+(e>>16&255)+","+(e>>8&255)+","+(e&255)+",0.5)",c.moveTo(a[a.length-2],a[a.length-1]),c.lineTo(a[0],a[1])):(c.closePath(),l&&(c.fillStyle=l,c.fill())));c.stroke();if(d){c.save();e=parseInt(c.strokeStyle.substr(1,6),16);c.fillStyle=160<0.2126*(e>>16&255)+0.7152*(e>>8&255)+ 0.0722*(e&255)?"#444444":"#FFFFFF";c.lineWidth=3;for(g=0;g<a.length;g+=2)c.beginPath(),c.arc(a[g],a[g+1],2.5,2*Math.PI,!1),c.closePath(),c.stroke(),c.fill();c.restore()}c.restore()}; b.g.e.drawSpline=function(c,a,d,e,l,g){var h=[],k=a.length;e=e?1:0;if(0!=k){4==k&&(c.beginPath(),c.moveTo(a[0],a[1]),c.lineTo(a[2],a[3]),c.stroke());e&&(a.push(a[0],a[1],a[2],a[3]),a.unshift(a[k-1]),a.unshift(a[k-1]));for(var m=0,s=k-4+4*e;m<s;m+=2)var u=a[m],v=a[m+1],x=a[m+2],p=a[m+3],r=a[m+4],w=a[m+5],q=Math.sqrt(Math.pow(x-u,2)+Math.pow(p-v,2)),q=d*q/(q+Math.sqrt(Math.pow(r-x,2)+Math.pow(w-p,2))),f=d-q,h=h.concat(x+q*(u-r),p+q*(v-w),x-f*(u-r),p-f*(v-w));h=e?h.concat(h[0],h[1]):h;c.save();c.beginPath(); c.lineJoin="round";c.moveTo(a[2],a[3]);for(m=2;m<k;m+=2)c.bezierCurveTo(h[2*m-2],h[2*m-1],h[2*m],h[2*m+1],a[m+2],a[m+3]);e?g?(c.stroke(),c.save(),d=parseInt(c.strokeStyle.substr(1,6),16),c.strokeStyle="rgba("+(d>>16&255)+","+(d>>8&255)+","+(d&255)+",0.5)",c.bezierCurveTo(h[2*k-2],h[2*k-1],h[2*k],h[2*k+1],a[k+2],a[k+3]),c.stroke(),c.restore()):(c.bezierCurveTo(h[2*k-2],h[2*k-1],h[2*k],h[2*k+1],a[k+2],a[k+3]),c.moveTo(a[0],a[1]),c.closePath(),l&&(c.fillStyle=l,c.fill()),c.stroke()):(c.moveTo(a[0],a[1]), c.quadraticCurveTo(h[0],h[1],a[2],a[3]),c.moveTo(a[k-2],a[k-1]),c.quadraticCurveTo(h[2*k-10],h[2*k-9],a[k-4],a[k-3]),c.stroke());if(g){c.save();d=parseInt(c.strokeStyle.substr(1,6),16);c.fillStyle=160<0.2126*(d>>16&255)+0.7152*(d>>8&255)+0.0722*(d&255)?"#444444":"#FFFFFF";c.lineWidth=3;m=2*e;for(s=k-2+2*e;m<s;m+=2)c.beginPath(),c.arc(a[m],a[m+1],2.5,2*Math.PI,!1),c.closePath(),c.stroke(),c.fill();c.restore()}c.restore()}}; b.f.h.setupCSS=function(){var c=$("#"+b.id),a=b.canvas.offset.top+b.canvas.height-c.offset().top,c=(c.width()-420)/2,d=document.createElement("style");d.id=b.id+"StyleSheet";d.innerHTML="\n\t\t/*These drawTools-btn-Icon are css only icons*/\n\t\t#drawTools-btn-icon-fill{margin:12px 5px 0px 21px;width:12px;height:12px;background:black;border-bottom-right-radius:2px;border-bottom-left-radius:2px;-webkit-transform:rotate(-40deg);-moz-transform:rotate(-40deg);-ms-transform:rotate(-40deg);-o-transform:rotate(-40deg);transform:rotate(-40deg);-webkit-transform-origin:0 100%;-moz-transform-origin:0 100%;-ms-transform-origin:0 100%;-o-transform-origin:0 100%;transform-origin:0 100%;}\n\t\t#drawTools-btn-icon-fill:before{border-bottom:5px solid black;border-left:8px solid transparent;border-right:8px solid transparent;display:block;position:absolute;top:-6px;left:-6px;content:'';}\n\t\t#drawTools-btn-icon-line{margin:8px 16px 0px 17px;width:5px;height:15px;background:black;border-radius:2px;-webkit-transform:skew(-50deg);-moz-transform:skew(-50deg);-o-transform:skew(-50deg);transform:skew(-50deg);}\n\t\t#drawTools-btn-icon-rect{margin:8px 8px 0px 8px;width:22px;height:15px;background:black;}\n\t\t#drawTools-btn-icon-ellipse{margin:8px 8px 0px 8px;width:22px;height:15px;background:black;-moz-border-radius:11px/8px;-webkit-border-radius:11px/8px;border-radius:11px/8px;}\n\t\t#drawTools-btn-icon-exit{margin:6px 16px 0px 16px;width:5px;height:21px;background:#c2c2c2;-webkit-transform:skew(43deg);-moz-transform:skew(43deg);-o-transform:skew(43deg);transform:skew(43deg);}\n\t\t#drawTools-btn-icon-exit:before{width:5px;height:21px;background:#c2c2c2;-webkit-transform:skew(-62deg);-moz-transform:skew(-62deg);-o-transform:skew(-62deg);transform:skew(-62deg);content:'';display:block;}\n\t\t#drawTools-btn-icon-options{margin:5px 8px 0px 8px;width:30px;height:5px;background:#c2c2c2;border-radius:1px;}\n\t\t#drawTools-btn-icon-options:before{margin:8px 0px 0px 0px;width:30px;height:5px;background:#c2c2c2;border-radius:1px;content:'';display:block;position:absolute;}\n\t\t#drawTools-btn-icon-options:after{margin:16px 0px 0px 0px;width:30px;height:5px;background:#c2c2c2;border-radius:1px;content:'';display:block;position:absolute;}\n\t\t#drawTools-btn-icon-linechain{margin:8px 24px 0px 11px;width:3px;height:15px;background:black;border-radius:2px;-webkit-transform:rotate(-25deg);-moz-transform:rotate(-25deg);-o-transform:rotate(-25deg);transform:rotate(-25deg);}\n\t\t#drawTools-btn-icon-linechain:before{margin:5px 5px 2px 5px;width:3px;height:13px;background:black;border-radius:2px;content:'';display:block;position:absolute;-webkit-transform:rotate(65deg);-moz-transform:rotate(65deg);-o-transform:rotate(65deg);transform:rotate(65deg);}\n\t\t#drawTools-btn-icon-linechain:after{margin:8px 1px 0px 12px;width:3px;height:10px;background:black;border-radius:2px;content:'';display:block;position:absolute;-webkit-transform:rotate(-40deg);-moz-transform:rotate(-40deg);-o-transform:rotate(-40deg);transform:rotate(-40deg);}\n\t\t#drawTools-btn-icon-curve{margin:6px 15px 0px 11px;position: relative;width: 12px;height: 12px;-webkit-box-shadow:-0px 3px 0px 0px black;box-shadow:-0px 3px 0px 0px black;border-radius:100%;}\n\t\t#drawTools-btn-icon-curve:after{margin:10px 0px 0px 10px;position:relative;width:8px;height:10px;-webkit-box-shadow:0px -3px 0px 0px black;box-shadow:0px -3px 0px 0px black;border-radius:100%;content:'';display:block;position:absolute;}\n\t\t#drawTools-btn-icon-curve:before{margin:4px 0px 0px -1px;width:2px;height:9px;background:black;border-radius:2px;-webkit-transform:rotate(-30deg);-moz-transform:rotate(-30deg);-o-transform:rotate(-30deg);-ms-transform:rotate(-30deg);transform:rotate(-30deg);content:'';content:'';display:block;position:absolute;}\n\t\t\n\t\t#drawTools{position:relative;display:inline-block;vertical-align:middle;}\n\t\t#drawTools>.drawTools-btn{position:relative;float:left;display:inline-block;}\n\t\t\n\t\t#drawTools>.drawTools-btn:not(:first-child):not(:last-child):not(.dropdown-toggle){border-radius:0}\n\t\t#drawTools>.drawTools-btn:first-child{margin-left:0;}\n\t\t#drawTools>.drawTools-btn:first-child:not(:last-child):not(.dropdown-toggle){border-bottom-right-radius: 0;border-top-right-radius: 0;}\n\t\t#drawTools>.drawTools-btn:last-child:not(:first-child),#drawTools>.dropdown-toggle:not(:first-child){border-bottom-left-radius:0;border-top-left-radius:0;}\n\t\t\n\t\t.drawTools-btn{height:34px;border-radius:2px;margin-top:5px;}\n\t\t.drawTools-btn input{display:none;}\n\t\t\n\t\t.drawTools-btn-container{background-color:#fffb8d;border-bottom:1px solid #e5e17e;height:34px;padding:0px;margin:0px;font-size:14px;font-weight:normal;line-height:1.428571429;text-align:center;vertical-align:middle;cursor:pointer;border-radius:inherit;border-top:1px solid transparent;}\n\t\t.drawTools-btn-container:focus\t{outline:thin dotted #333;outline:5px auto -webkit-focus-ring-color;outline-offset:-2px;}\n\t\t.drawTools-btn-container:hover,.drawTools-btn:focus{background-color:#f6f166;border-bottom:1px solid #ddd85b;color:#333333;text-decoration:none;}\n\t\t.drawTools-btn-container:active,.drawTools-btn input:focus + div,.drawTools-btn input:checked + div{background-color:#f6f166;border-bottom:1px solid #f6f166;-webkit-box-shadow:inset 0 3px 5px rgba(0,0,0,0.5);box-shadow:inset 0 3px 5px rgba(0,0,0,0.5);}\n\t\t.drawTools-btn-container.disabled,.drawTools-btn-container[disabled],fieldset[disabled] .drawTools-btn-container{cursor:not-allowed;pointer-events:none;opacity:0.65;filter:alpha(opacity=65);-webkit-box-shadow:none;box-shadow:none;}\n\t\t\n\t\t#drawTools-btn-options .drawTools-btn-container{background:#252525;border-bottom:1px solid #171717;}\n\t\t#drawTools-btn-options .drawTools-btn-container:focus{outline:thin dotted #fff;}\n\t\t#drawTools-btn-options .drawTools-btn-container:hover,#drawTools-btn-options .drawTools-btn:focus{background-color:#2e2e2e;border-bottom:1px solid #222222;}\n\t\t#drawTools-btn-options .drawTools-btn-container:active{background-color:#252525;border-bottom:1px solid #252525;}\n\t\t\n\t\t#drawTools-btn-exit .drawTools-btn-container{background:#a50000;border-bottom:1px solid #7c0000;}\n\t\t#drawTools-btn-exit .drawTools-btn-container:focus{outline:thin dotted #fff;}\n\t\t#drawTools-btn-exit .drawTools-btn-container:hover,#drawTools-btn-exit .drawTools-btn:focus{background-color:#b90c0c;border-bottom:1px solid #980909;}\n\t\t#drawTools-btn-exit .drawTools-btn-container:active{background-color:#a50000;border-bottom:1px solid #a50000;}\n\t\t\n\t\t#drawTools-options{margin-top:"+ a+"px;margin-left:"+c+"px;background:#252525;border-bottom:1px solid #171717;width:420px;height:0px;position:absolute;border-radius:2px 2px 0px 0px;opacity:0;overflow:hidden;-webkit-box-shadow:0px 0px 5px 0px rgba(0,0,0,0.75);-moz-box-shadow:0px 0px 5px 0px rgba(0,0,0,0.75);box-shadow:0px 0px 5px 0px rgba(0,0,0,0.75);}\n\t\t#drawTools-options-content{position:absolute;top:8px;left:8px;right:8px;bottom:8px;}\n\t\t\n\t\t#drawTools-options-leftPanel{width:160px;height:100%;position:absolute;left:0px;}\n\t\t#drawTools-options-leftPanel>.switch{display:block;margin-bottom:20px;}\n\t\t\n\t\t.switch{font:13px/20px 'Helvetica Neue',Helvetica,Arial,sans-serif;-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;width:150px;height:26px;position:relative;display:inline-block;vertical-align:top;padding:3px;border-radius:2px;cursor:pointer;box-shadow:inset 0 -1px #525252,inset 0 1px 1px rgba(0,0,0,0.8);}\n\t\t.switch-input{position:absolute;top:0;left:0;opacity:0;}\n\t\t.switch-label{position:relative;display:block;height:inherit;font-size:12px;text-transform:uppercase;background:#7b0000;border-radius:inherit;box-shadow:inset 0 1px 2px rgba(0,0,0,0.12),inset 0 0 2px rgba(0,0,0,0.15);-webkit-transition:0.15s ease-out;-moz-transition:0.15s ease-out;-o-transition:0.15s ease-out;transition:0.15s ease-out;-webkit-transition-property:opacity background;-moz-transition-property:opacity background;-o-transition-property:opacity background;transition-property:opacity background;}\n\t\t.switch-label:before,.switch-label:after{position:absolute;top:50%;margin-top:-.5em;line-height:1;-webkit-transition:inherit;-moz-transition:inherit;-o-transition:inherit;transition:inherit;}\n\t\t.switch-label:before{content:attr(data-off);right:11px;color:white;text-shadow:0 1px rgba(0,0,0,0.2);}\n\t\t.switch-label:after{content:attr(data-on);left:11px;color:white;text-shadow:0 1px rgba(0,0,0,0.2);opacity:0;}\n\t\t.switch-input:checked ~ .switch-label {background:#117b00;box-shadow:inset 0 1px 2px rgba(0,0,0,0.15),inset 0 0 3px rgba(0,0,0,0.2);}\n\t\t.switch-input:checked~.switch-label:before{opacity:0;}\n\t\t.switch-input:checked~.switch-label:after{opacity: 1;}\n\t\t.switch-handle{position:absolute;top:4px;left:4px;width:24px;height:24px;background:#c2c2c2;border-radius:2px;box-shadow:1px 1px 5px rgba(0,0,0,0.2);background-image:-webkit-linear-gradient(top, #c2c2c2 40%, #a7a7a7);background-image:-moz-linear-gradient(top, #c2c2c2 40%, #a7a7a7);background-image:-o-linear-gradient(top, #c2c2c2 40%, #a7a7a7);background-image:linear-gradient(to bottom, #c2c2c2 40%, #a7a7a7);-webkit-transition:left 0.15s ease-out;-moz-transition:left 0.15s ease-out;-o-transition:left 0.15s ease-out;transition:left 0.15s ease-out;}\n\t\t.switch-input:checked~.switch-handle{left:128px;box-shadow:-1px 1px 5px rgba(0,0,0,0.2);}\n\t\t.switch-green>.switch-input:checked~.switch-label{background:#4fb845;}\n\t\t\n\t\t#drawTools-options-palette{width:240px;height:100%;position:absolute;right:0px;}\n\t\t#drawTools-options-palette label{width:40px;height:40px;float:left;overflow:hidden;display:inline-block;margin:0;padding=0;}\n\t\t#drawTools-options-palette input{display:none;visibility:hidden;margin:0px;padding:0px;}\n\t\t#drawTools-options-palette input:checked + div{border:2px solid #c2c2c2;}\n\t\t#drawTools-options-palette div{width:40px;height:40px;border:2px solid #252525;margin=0;padding=0;line-height:2.428571429;}\n\t\t#drawTools-options-palette div:focus{outline:thin dotted #333;outline:5px auto -webkit-focus-ring-color;}\n\t\t#drawTools-options-palette div:hover,#drawTools-options-palette div:focus,#drawTools-options-palette div:active{border:2px solid red;}\n\t\t\n\t\t.drawTools-buttonText,#drawTools-options-palette div{font-size:14px;font-weight:normal;text-align:center;vertical-align:middle;cursor:pointer;-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}\n\t\t\n\t\t"; document.body.appendChild(d)};b.m.mouseDown=function(c){var a=b.g;1==$("#drawTools-options").T("opacity")?(painting=!1,b.canvas.restore(),b.options.W()):a.d!==a.b.D&&(a.C=!0,b.canvas.X(),b.i=c.pageX-b.canvas.offset.left,b.j=c.pageY-b.canvas.offset.top,a.d===a.b.G?(painting=!1,a.e.ca(b.c,b.i,b.j)):a.d===a.b.s?(painting=!1,a.a.push(b.i,b.j)):a.d===a.b.l?painting=!1:a.d===a.b.w?painting=!1:a.d===a.b.o?(painting=!1,a.a.push(b.i,b.j)):a.d===a.b.r&&(painting=!1,a.a.push(b.i,b.j)))}; b.m.mouseMove=function(c){var a=b.g;if(a.d!==a.b.D&&a.C){b.i=c.pageX-b.canvas.offset.left;b.j=c.pageY-b.canvas.offset.top;c=b.i;var d=b.j;if(a.d!==a.b.G)if(a.d===a.b.s)b.n&&(d=a.J(a.a[0],a.a[1],c,d),c=d.x,d=d.y),b.canvas.restore(),a.e.M(b.c,a.a[0],a.a[1],c,d);else if(a.d===a.b.l){if(0<a.a.length){b.n&&(d=a.J(a.a[a.a.length-2],a.a[a.a.length-1],c,d),c=d.x,d=d.y);var e=b.options.k?b.c.strokeStyle:b.options.fillColor;b.canvas.restore();a.e.I(b.c,a.a.concat(c,d),!0,b.options.p,e)}}else a.d===a.b.w?0< a.a.length&&(e=b.options.k?b.c.strokeStyle:b.options.fillColor,b.canvas.restore(),a.e.O(b.c,a.a.concat(b.i,b.j),0.5,b.options.p,e,!0)):a.d===a.b.o?(e=b.options.k?b.c.strokeStyle:b.options.fillColor,b.n&&(d=a.B(a.a[0],a.a[1],c,d),c=d.x,d=d.y),b.canvas.restore(),a.e.N(b.c,a.a.concat(c,d),e)):a.d===a.b.r&&(e=b.options.k?b.c.strokeStyle:b.options.fillColor,b.n&&(d=a.B(a.a[0],a.a[1],c,d),c=d.x,d=d.y),b.canvas.restore(),a.e.L(b.c,a.a.concat(c,d),e))}}; b.m.mouseUp=function(c){var a=b.g;if(a.d!==a.b.D&&a.C){b.i=c.pageX-b.canvas.offset.left;b.j=c.pageY-b.canvas.offset.top;var d=b.i,e=b.j;a.d===a.b.G?a.reset(!0):a.d===a.b.s?(b.n&&(e=a.J(a.a[0],a.a[1],d,e),d=e.x,e=e.y),b.canvas.restore(),a.e.M(b.c,a.a[0],a.a[1],d,e),a.reset(!0)):a.d===a.b.l?b.canvas.U(b.i,b.j)?(b.n&&(e=a.J(a.a[a.a.length-2],a.a[a.a.length-1],d,e),d=e.x,e=e.y),a.a.push(d,e),3==c.which&&(c=b.options.k?b.c.strokeStyle:b.options.fillColor,b.canvas.restore(),a.e.I(b.c,a.a,!1,b.options.p, c),a.reset(!0))):(b.canvas.restore(),a.reset()):a.d===a.b.w?b.canvas.U(b.i,b.j)?(a.a.push(b.i,b.j),3==c.which&&(c=b.options.k?b.c.strokeStyle:b.options.fillColor,b.canvas.restore(),a.e.O(b.c,a.a,0.5,b.options.p,c,!1),a.reset(!0))):(b.canvas.restore(),a.reset()):a.d===a.b.o?(c=b.options.k?b.c.strokeStyle:b.options.fillColor,b.n&&(e=a.B(a.a[0],a.a[1],d,e),d=e.x,e=e.y),b.canvas.restore(),a.a.push(d,e),a.e.N(b.c,a.a,c),a.reset(!0)):a.d===a.b.r&&(c=b.options.k?b.c.strokeStyle:b.options.fillColor,b.n&& (e=a.B(a.a[0],a.a[1],d,e),d=e.x,e=e.y),b.canvas.restore(),a.a.push(d,e),a.e.L(b.c,a.a,c),a.reset(!0))}}; b.m.keyDown=function(c){var a=b.g;if(16==c.keyCode){b.n=1;c=b.i;var d=b.j;if(a.C)if(a.d===a.b.o||a.d===a.b.r){d=a.B(a.a[0],a.a[1],c,d);c=d.x;d=d.y;b.canvas.restore();var e=b.options.k?b.c.strokeStyle:b.options.fillColor;a.d===a.b.o?a.e.N(b.c,a.a.concat(c,d),e):a.e.L(b.c,a.a.concat(c,d),e)}else(a.d===a.b.s||a.d===a.b.l)&&0<a.a.length&&(d=a.J(a.a[a.a.length-2],a.a[a.a.length-1],c,d),c=d.x,d=d.y,b.canvas.restore(),a.d===a.b.l?(e=b.options.k?b.c.strokeStyle:b.options.fillColor,a.e.I(b.c,a.a.concat(c, d),!0,b.options.p,e)):a.e.M(b.c,a.a[0],a.a[1],c,d))}else 81!=c.keyCode||a.d!==a.b.l&&a.d!==a.b.w||!a.a.length||(a.a.length-=2,b.canvas.restore(),0==a.a.length?a.reset():(e=b.options.k?b.c.strokeStyle:b.options.fillColor,a.d===a.b.l?a.e.I(b.c,a.a.concat(b.i,b.j),!0,b.options.p,e):a.e.O(b.c,a.a.concat(b.i,b.j),0.5,b.options.p,e,!0)))}; b.m.keyUp=function(c){var a=b.g;if(16==c.keyCode){b.n=0;c=b.i;var d=b.j;if(a.C)if(a.d===a.b.o||a.d===a.b.r){b.canvas.restore();var e=b.options.k?b.c.strokeStyle:b.options.fillColor;a.d===a.b.o?a.e.N(b.c,a.a.concat(c,d),e):a.e.L(b.c,a.a.concat(c,d),e)}else(a.d===a.b.s||a.d===a.b.l)&&0<a.a.length&&(b.canvas.restore(),a.d===a.b.l?(e=b.options.k?b.c.strokeStyle:b.options.fillColor,a.e.I(b.c,a.a.concat(c,d),!0,b.options.p,e)):a.e.M(b.c,a.a[0],a.a[1],c,d))}}; b.f.h.createToolButton=function(c,a){var d=document.createElement("label");d.id=b.id+"-btn-"+a;d.className=b.id+"-btn";d.innerHTML='<input id="'+b.id+"-btn-radio-"+a+'" name="'+b.id+'-btn-radio" type="radio"><div class="'+b.id+'-btn-container"><div id="'+b.id+"-btn-icon-"+a+'"></div></div>';document.getElementById(b.id).appendChild(d);d.onclick=function(){b.f.H.la(c)};return d};b.f.h.createToolButtonWithLabel=function(c,a,d){c=b.f.h.u(c,a);c.getElementsByTagName("div")[0].innerHTML=d;return c}; b.f.h.createUtilityButton=function(c){var a=document.createElement("label");a.id=b.id+"-btn-"+c;a.className=b.id+"-btn";a.innerHTML='<div class="'+b.id+'-btn-container"><div id="'+b.id+"-btn-icon-"+c+'"></div></div>';document.getElementById(b.id).appendChild(a);return a}; b.f.h.createOptionsMenu=function(c,a){var d=document.createElement("div");d.id=b.id+"-options";d.innerHTML='<div id="drawTools-options-content"><div id="drawTools-options-leftPanel"></div><div id="drawTools-options-palette"></div></div>';c.insertBefore(d,a.nextSibling);document.getElementById("drawTools-options-leftPanel").innerHTML='<label onclick=cleanTools.html.buttonHandlers.setLineToolsOpen(); class="switch">\t\t\t<input type="checkbox" class="switch-input" id="drawTools-options-checkbox-lineToolsOpen">\t\t\t<span class="switch-label" data-on="Loop Line Tools" data-off="Open Line Tools"></span>\t\t\t<span class="switch-handle"></span>\t\t</label>'; var d=document.getElementsByClassName("colorPicker"),e;e='<label onclick=cleanTools.html.buttonHandlers.setOptionsColor(""); style="width:120px;"><input type="radio" name="drawTools-options-palette-radio" checked><div style="width:120px;background:#333333;color:#c2c2c2;">No Fill</div></label><label onclick=cleanTools.html.buttonHandlers.setOptionsColor("",1); style="width:120px;"><input type="radio" name="drawTools-options-palette-radio"><div style="width:120px;background:#333333;color:#c2c2c2;">Brush Color</div></label>'; for(var l=0;l<d.length;l++){var g=d[l].getAttribute("data-color");b.aa.push(g);e+='<label onclick=cleanTools.html.buttonHandlers.setOptionsColor("'+g+'");><input type="radio" name="drawTools-options-palette-radio"><div style="background:'+g+';"></div></label>'}document.getElementById("drawTools-options-palette").innerHTML=e}; b.f.DTDestroy=function(){document.getElementById(b.id).remove();document.getElementById(b.id+"StyleSheet").remove();$(document).A("mousedown");$(document).A("mousemove");$(document).A("mouseup");window.Q=!1;delete b.canvas;delete b.f;delete b;document.getElementById("DTScript").remove()}; b.f.h.setupCssAndHtml=function(){b.canvas.X();var c=document.createElement("div");c.id=b.id;b.ba.appendChild(c);b.f.h.ma();document.getElementById(b.q[0].id).parentNode.onclick=function(){b.f.H.K(b.q[0].size)};document.getElementById(b.q[1].id).parentNode.onclick=function(){b.f.H.K(b.q[1].size)};document.getElementById(b.q[2].id).parentNode.onclick=function(){b.f.H.K(b.q[2].size)};document.getElementById(b.q[3].id).parentNode.onclick=function(){b.f.H.K(b.q[3].size)};b.f.h.u(b.g.b.G,"fill");b.f.h.u(b.g.b.s, "line");b.f.h.u(b.g.b.l,"linechain");b.f.h.u(b.g.b.w,"curve");b.f.h.u(b.g.b.o,"rect");b.f.h.u(b.g.b.r,"ellipse");var a=b.f.h.S("options");a.onclick=function(){b.options.W()};b.f.h.$(c,a);b.f.h.S("exit").onclick=function(){b.f.Y()}};b.c.putImageData=CanvasRenderingContext2D.prototype.putImageData;b.f.h.na();b.F.A("mousedown");b.F.P("mousedown",b.m.ha);$(document).A("mousemove");$(document).P("mousemove",b.m.ia);$(document).A("mouseup");$(document).P("mouseup",b.m.ja);$(document).fa(b.m.da);$(document).ga(b.m.ea);